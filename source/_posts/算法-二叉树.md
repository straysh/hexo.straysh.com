---
title: 算法_二叉树
date: 2020-02-19 11:30:46
tags: 
- Algorithm
- Golang
- Translation
categories: 博文
---
（最大）二叉堆是一个维护着最大堆属性的完全二叉树。
最大堆用来实现高效的优先级队列`PQ`(Priority Queue)。

<!--more-->
为集中精力讨论二叉堆本身，本教学中的最大二叉堆中不包含相同的数值。

完全二叉树的定义：除最下层，其它层组成满二叉树（每个节点上都有值），而最下层的节点都靠左排列不留空隙。

最大二叉堆属性：每个节点的父节点(除了根节点)，都比该节点大。

优先级队列：
1. `Enqueue(x)`，将新元素`x`放入队列(按照某种次序)
2. `y = Dequeue()`，将序列中优先级最大的值返回；若存在相同优先级的值，则返回最先插入的值，即退化到`FIFO`

最大二叉堆的高度 <= `log N`(二分)

完全二叉树可以高效的存储为数组，因为展开为数组之后，各节点之间没有空隙。为简化遍历操作，我们假设数组下标从1开始。

![1_based_compact_array](/images/ds/1_based_compact_array.png)
1. `parent(i) = i>>1`，例如8号节点的父节点为4号则`parent(8) = 8>>1 = 4`
2. `left(i) = i<<1`
3. `right(i) = (i<<1) + 1`

本教学中会介绍一下（最大）二叉堆的操作：
1. Insert(v) `O(log N)`
2. ExtractMax() `O(log N)`
3. Create(A) `O(N log N)`版本
4. Create(A) `O(N)`版本
5. HeapSort() `O(N log N)`

### Inset(v)
![BHT_BubbleUp](/images/ds/BHT_BubbleUp.gif)
插入操作只能在最末尾的位置进行，这是为来保证二叉树的完全二叉树属性。但此时也可能会破坏最大堆属性，因此插入点可能需要向上移动。这个操作称之为`ShitUp`或`BubbleUp`或`IncreaseKey`。

### ExtractMax
删除堆顶数据，然后将最末尾数据移动到堆顶，此时会破坏最大堆结构，因此需要向下调整。称之为`ShiftDown`或`BubbleDown`或`Heapify`操作。
在向下调整时，总是和较大的子节点交换。

### PQ - 优先级队列
到此，有了`Insert(v)`和`ExtractMax()`操作，我们实现了优先级队列。
